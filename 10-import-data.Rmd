---
title: "10-import-data"
output: html_notebook
---

# Data

All data is structured. Source files are all SAS export files. This is a large dataset, collected in waves. The most recent is Wave 5, which includes the outcomes.

## Libraries
```{r}
# install.packages("SASxport")
library(SASxport)
library(haven)
library(dplyr)
library(tidyr)
# library(vroom)
```

## Importing The Waves

**INSTRUCTIONS [Please See]**

Change to your username after `/home/username/gvfs.../wave1.xpt` in order to load the file from your file directory on ACCRE

```{r}
wave1 <- read_xpt("/home/yuex/gvfs/smb-share:server=vu1file.it.vanderbilt.edu,share=gaydosh_addhealth/Gaydosh/Core Files/In Home Interview Files/wave1.xpt")

wave2 <- read_xpt("/home/yuex/gvfs/smb-share:server=vu1file.it.vanderbilt.edu,share=gaydosh_addhealth/Gaydosh/Core Files/In Home Interview Files/wave2.xpt")

wave3 <- read_xpt("/home/yuex/gvfs/smb-share:server=vu1file.it.vanderbilt.edu,share=gaydosh_addhealth/Gaydosh/Core Files/In Home Interview Files/wave3.xpt")

wave4 <- read_xpt("/home/yuex/gvfs/smb-share:server=vu1file.it.vanderbilt.edu,share=gaydosh_addhealth/Gaydosh/Core Files/In Home Interview Files/wave4.xpt")

wave5 <- read_xpt("/home/yuex/gvfs/smb-share:server=vu1file.it.vanderbilt.edu,share=gaydosh_addhealth/Gaydosh/Core Files/In Home Interview Files/wave5.xpt")
```


## Joined Data
```{r}
joined_waves <- wave1 %>%
    inner_join(wave2, by = "AID") %>%
    inner_join(wave3, by = "AID") %>%
    inner_join(wave4, by = "AID") %>%
    inner_join(wave5, by = "AID")

```


#### Check the exsit of one variable 
```{r}
# Such as 
c("C4VAR010") %in% names(wave4)
```


#### Get Diagnosed anxiety, Anxiety and Optimism
```{r}
# c4var009 for anxiety not exist.
# c4var010 for optimism not exist.
anxiety_optimism <- joined_waves %>%
  select("AID", "H4ID5J","H5ID6I",
"H4PE6",	
"H4PE14",	
"H4PE22",	
"H4PE30",	
"H4PE7","H5PE1",
"H4PE15","H5PE2",
"H4PE23","H5PE3",
"H4PE31"
)%>%
  drop_na()    ## reduce to 7127 observations.

diag_anxiety <- anxiety_optimism %>%
  select("AID", "H4ID5J","H5ID6I")

anxiety <- anxiety_optimism %>%
  select("AID",
"H4PE6",	
"H4PE14",	
"H4PE22",	
"H4PE30")

Optimism <- anxiety_optimism %>%
  select("AID",
  "H4PE7","H5PE1",
"H4PE15","H5PE2",
"H4PE23","H5PE3",
"H4PE31")


## How to come up with c4var009 and c4var010?
```



## Read data

```{r}
# suiside ideation data import




# marijuana data import

```



## Data Description/ Fields

Measures used:

Dependent variables: diseases of despair, including suicidal ideation, heavy/problem drinking, drug use, DSM-IV criteria for alcohol, marijuana, and other drug abuse and dependence
*	Suicidal ideation at Wave IV
    +	Thoughts of suicide in the last 12 months
*	Alcohol use at Wave IV
    +	Days drank alcohol in last 12 months
    +	Drinks each time in last 12 months
    +	Days drank alcohol in last 3 months
    +	Drinks each time in last 3 months
    +	Occasions of more than 4/5 drinks in a row in last 12 months
    +	DSM4 lifetime diagnosis of alcohol abuse or dependence
*	Marijuana use at Wave IV
    +	Times used in last 30 days
    +	DSM4 lifetime diagnosis of cannabis abuse or dependence
*	Illegal drug use at Wave IV
    +	DSM4 lifetime diagnosis of other drug use/dependence
    +	Lifetime use of cocaine, crystal meth, heroin, other illegal drugs (separately)
*	Prescription drug abuse at Wave IV
    +	Lifetime use of sedatives, tranquilizers, stimulants, painkillers (separately)

Key independent variables: measures of cognitive and emotional despair
*	Cognitive despair
    +	Wave III personality measures of self-consciousness, persistence
*	Emotional despair
    +	Wave I – III CES-D items

Other variables: 
*	Demographic controls for age at Wave IV, sex, race/ethnicity
*	Wave I – III predictors
